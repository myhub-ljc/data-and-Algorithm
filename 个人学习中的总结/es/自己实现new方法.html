<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>自己实现new方法</title>
</head>
<body>
  <script>
    /*
      基于js内置的new关键词,我们可以创建某类的一个实例,因此实例可以去调取原型上的属性和方法,
      现在的需求是: 自己实现一个new方法,也要能模拟出内置new的结果
      
      (很重要)首先应知道 我们用js内置的new关键词去创建一个实例时,中间的过程是怎样的
      1,像普通函数一样,形成一个私有的作用域
        (1) 形参赋值
        (2) 变量提升
      2,默认创建一个对象,并让this指向这个对象,而这个对象就是所创建的实例
      3,代码执行
      4,默认把创建的对象返回
    */
    function Dog(name) {
      this.name = name
    }
    Dog.prototype.bark = function () {
      console.log("wangwang")
    }
    Dog.prototype.sayName = function () {
      console.log("my name is" + name)
    }

    function _new(Fn, ...arg) {
      let obj = {}
      obj._proto_ = Fn.prototype
      Fn.call(obj, ...arg)
      return obj
    }

    let sanmao = _new(Dog, '三毛')
    sanmao.bark()
    console.log(sanmao instanceof Dog)
  </script>
</body>
</html>